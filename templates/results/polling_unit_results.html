<h1>Polling Unit Results - Delta State</h1>

<form method="post">
    {% csrf_token %}
    <label for="polling_unit_id">Select Polling Unit ID:</label>
    <select name="polling_unit_id" id="polling_unit_id">
        {% for id in polling_unit_ids %}
            <option value="{{ id }}">{{ id }}</option>
        {% endfor %}
    </select>
    <input type="submit" value="Get Results">
</form>

{% if error %}
    <p style="color: red;">{{ error }}</p>
{% endif %}

{% if polling_units %}
    {% if polling_units.count > 1 %}
        <h2>{{ polling_units.count }} Polling units match ID</h2>
        {% for unit in polling_units %}
            <h3>Polling Unit: {{ unit.polling_unit_name }}</h3>
            <p>ID: {{ unit.polling_unit_id }}</p>
            <p>LGA: {{ unit.lga.lga_name }}</p>
        {% endfor %}
    {% else %}
        <h2>Polling Unit: {{ polling_units.first.polling_unit_name }}</h2>
        <p>ID: {{ polling_units.first.polling_unit_id }}</p>
        <p>LGA: {{ polling_units.first.lga.lga_name }}</p>
    {% endif %}

    <h3>Results:</h3>
    {% if results %}
    <table border="1">
        <tr>
            <th>Party</th>
            <th>Score</th>
        </tr>
        {% for result in results %}
        <tr>
            <td>{{ result.party_abbreviation }}</td>
            <td>{{ result.party_score }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No results found for this polling unit.</p>
    {% endif %}
{% endif %}
